<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Voice Translator</title>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="style.css">
</head>

<body class="text-white">
<div class="container mx-auto px-4 py-8 max-w-6xl">

    <!-- Header -->
    <div class="text-center mb-8">
        <h1 class="text-4xl font-bold mb-3">
            <i class="fas fa-language mr-2"></i>
            AI Voice Translator
        </h1>
        <p class="text-xl text-gray-200">Speak in any language â†’ Get instant translation â†’ Listen to result</p>

        <div id="status" class="inline-flex items-center gap-2 mt-4 px-4 py-2 rounded-full bg-black bg-opacity-30">
            <div id="status-dot" class="w-2 h-2 rounded-full bg-red-500"></div>
            <span id="status-text" class="text-sm">Checking backend...</span>
        </div>
    </div>

    <!-- Main Content -->
    <div class="grid md:grid-cols-3 gap-6">
        <!-- Left Panel - Input -->
        <div class="glass-card rounded-2xl p-6">
            <h2 class="text-2xl font-bold mb-4 flex items-center">
                <i class="fas fa-microphone mr-2"></i>
                Input
            </h2>
            
            <!-- Wave Visualization -->
            <div class="wave-container flex items-end justify-center h-24 mb-6 gap-1">
                <!-- Generated by JS -->
            </div>
            
            <!-- Recording Controls -->
            <button id="record-btn" 
                    class="w-full py-4 bg-red-500 hover:bg-red-600 rounded-xl font-bold text-lg mb-4 transition-all">
                <i class="fas fa-microphone mr-2"></i>
                <span id="record-text">Start Recording</span>
                <span id="timer" class="ml-2 hidden">00:00</span>
            </button>
            
            <div class="text-center text-gray-300 mb-4">OR</div>
            
            <button id="upload-btn" 
                    class="w-full py-3 bg-purple-600 hover:bg-purple-700 rounded-xl mb-6 transition-all">
                <i class="fas fa-upload mr-2"></i>
                Upload Audio File
            </button>
            <input type="file" id="audio-file" accept="audio/*" class="hidden">
            
            <!-- Language Selection -->
            <div class="mb-6">
                <label class="block mb-2 font-medium">Translate to:</label>
                <select id="target-lang" class="w-full p-3 rounded-lg bg-black bg-opacity-30">
                    <option value="en">ðŸ‡ºðŸ‡¸ English</option>
                    <option value="fr">ðŸ‡«ðŸ‡· French</option>
                    <option value="es">ðŸ‡ªðŸ‡¸ Spanish</option>
                    <option value="de">ðŸ‡©ðŸ‡ª German</option>
                    <option value="it">ðŸ‡®ðŸ‡¹ Italian</option>
                    <option value="zh">ðŸ‡¨ðŸ‡³ Chinese</option>
                    <option value="hi">ðŸ‡®ðŸ‡³ Hindi</option>
                    <option value="ar">ðŸ‡¸ðŸ‡¦ Arabic</option>
                    <option value="ru">ðŸ‡·ðŸ‡º Russian</option>
                    <option value="pt">ðŸ‡µðŸ‡¹ Portuguese</option>
                </select>
            </div>
            
            <!-- Original Text -->
            <div>
                <label class="block mb-2 font-medium">
                    <i class="fas fa-comment-dots mr-2"></i>
                    Original Text
                </label>
                <textarea id="input-text" 
                        class="w-full h-40 p-4 rounded-lg bg-black bg-opacity-20 border border-gray-600 text-white" 
                        placeholder="Your speech will appear here..." readonly></textarea>
            </div>
        </div>
        
        <!-- Middle Panel - Controls -->
        <div class="glass-card rounded-2xl p-6">
            <h2 class="text-2xl font-bold mb-4 flex items-center">
                <i class="fas fa-cogs mr-2"></i>
                Controls
            </h2>
            
            <button id="translate-btn" 
                    class="w-full py-4 bg-green-600 hover:bg-green-700 rounded-xl font-bold text-lg mb-4 transition-all">
                <i class="fas fa-exchange-alt mr-2"></i>
                Translate Now
                <i id="translate-spinner" class="fas fa-spinner fa-spin ml-2 hidden"></i>
            </button>
            
            <button id="clear-btn" 
                    class="w-full py-3 bg-gray-700 hover:bg-gray-800 rounded-xl mb-6 transition-all">
                <i class="fas fa-trash mr-2"></i>
                Clear All
            </button>
            
            <!-- Translation Info -->
            <div class="bg-black bg-opacity-30 rounded-xl p-4 mb-6">
                <h3 class="font-bold mb-2">Translation Info</h3>
                <div class="space-y-2 text-sm">
                    <div>
                        <span class="text-gray-400">Detected:</span>
                        <span id="detected-lang" class="ml-2 font-medium">--</span>
                    </div>
                    <div>
                        <span class="text-gray-400">Time:</span>
                        <span id="process-time" class="ml-2 font-medium">--</span>
                    </div>
                    <div>
                        <span class="text-gray-400">Status:</span>
                        <span id="translation-status" class="ml-2 font-medium text-green-400">Ready</span>
                    </div>
                </div>
            </div>
            
            <!-- Quick Tips -->
            <div class="bg-black bg-opacity-30 rounded-xl p-4">
                <h3 class="font-bold mb-2">ðŸ’¡ Quick Tips</h3>
                <ul class="text-sm space-y-1">
                    <li>â€¢ Speak clearly into microphone</li>
                    <li>â€¢ Keep recordings under 30 seconds</li>
                    <li>â€¢ Use headphones for best audio</li>
                    <li>â€¢ Press Spacebar to start/stop recording</li>
                </ul>
            </div>
        </div>
        
        <!-- Right Panel - Output -->
        <div class="glass-card rounded-2xl p-6">
            <h2 class="text-2xl font-bold mb-4 flex items-center">
                <i class="fas fa-robot mr-2"></i>
                Output
            </h2>
            
            <!-- Translation Result -->
            <div class="mb-6">
                <div class="flex justify-between items-center mb-2">
                    <label class="font-medium" id="output-label">
                        <span id="target-lang-name">English</span> Translation:
                    </label>
                    <button id="copy-btn" 
                            class="px-3 py-1 bg-blue-600 hover:bg-blue-700 rounded text-sm transition-all">
                        <i class="fas fa-copy mr-1"></i>
                        Copy
                    </button>
                </div>
                <textarea id="output-text" 
                        class="w-full h-40 p-4 rounded-lg bg-black bg-opacity-20 border border-gray-600 text-white" 
                        placeholder="Translation will appear here..."
                        readonly></textarea>
            </div>
            
            <!-- Audio Player -->
            <div>
                <label class="block mb-2 font-medium">
                    <i class="fas fa-volume-up mr-2"></i>
                    Listen to Translation:
                </label>
                
                <div id="audio-player" class="hidden">
                    <div class="flex items-center gap-4">
                        <button id="play-btn" 
                                class="w-10 h-10 bg-green-600 hover:bg-green-700 rounded-full flex items-center justify-center transition-all">
                            <i class="fas fa-play"></i>
                        </button>
                        <div class="flex-1 h-2 bg-gray-700 rounded-full overflow-hidden">
                            <div id="progress-bar" class="h-full bg-green-500" style="width: 0%"></div>
                        </div>
                        <div id="audio-time" class="text-sm font-mono">00:00 / 00:00</div>
                    </div>
                </div>
                
                <div id="no-audio" class="text-center py-6 text-gray-400">
                    <i class="fas fa-music text-3xl mb-2"></i>
                    <p>Audio will appear here after translation</p>
                </div>
                
                <!-- Hidden audio element -->
                <audio id="audio-element" class="hidden"></audio>
            </div>
            
            <!-- Status Message -->
            <div id="status-message" class="mt-6 p-3 rounded-lg text-center text-sm bg-black bg-opacity-30 hidden"></div>
        </div>
    </div>

    <!-- ================= HISTORY PANEL ================= -->
    <div class="glass-card rounded-2xl p-6 mt-8">
        <h2 class="text-2xl font-bold mb-4 flex items-center">
            <i class="fas fa-history mr-2"></i>
            Translation History
        </h2>

        <div id="history-list" class="space-y-3 max-h-72 overflow-y-auto pr-2">
            <p class="text-gray-400 text-sm text-center py-4">No history yet</p>
        </div>

        <button id="clear-history"
                class="w-full mt-4 py-2 bg-red-600 hover:bg-red-700 rounded-xl transition-all">
            <i class="fas fa-trash mr-2"></i>
            Clear History
        </button>
    </div>

    <!-- Footer -->
    <div class="mt-8 text-center text-gray-400 text-sm">
        <p>AI Voice Translator â€¢ Powered by Whisper AI & Argos Translate</p>
    </div>
</div>

<!-- Toast -->
<div id="toast" class="fixed bottom-4 right-4 glass-card rounded-xl p-4 max-w-sm transform translate-x-full transition-transform z-50">
    <div class="flex items-center gap-3">
        <i id="toast-icon" class="fas fa-info-circle text-xl"></i>
        <p id="toast-message" class="font-medium"></p>
    </div>
</div>

<!-- JS -->
<script src="script.js"></script>
</body>
</html>